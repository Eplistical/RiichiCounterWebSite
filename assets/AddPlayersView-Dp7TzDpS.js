import{r as w,a as d,o as m,c as p,b as o,w as _,F as N,E as T,d as F,e as b,t as k,u as S,f as V,g as B,A as I,_ as C}from"./index-CjcUtdl6.js";const D={__name:"AddPlayers",setup(f){const s=w({player_names:""}),i=d("新玩家"),y=d("每行一个玩家昵称，不含空格"),h=d("添加"),g=d("输入管理员口令"),v=d("至少输入一个新玩家名");function A(e){let a="";return e.added.length>0&&(a+=`
${e.added.length}名玩家已添加: ${e.added}`),e.duplicated.length>0&&(a+=`
${e.duplicated.length}名玩家昵称已存在: ${e.duplicated}`),e.invalid.length>0&&(a+=`
${e.invalid.length}名玩家昵称格式错误: ${e.invalid}`),a}function x(){P(s.player_names)}function P(e){const a=e.split(`
`).map(t=>t.trim());let c=new Set,l=[];for(let t of a)t!=""&&!c.has(t)&&(l.push(t),c.add(t));if(l.length==0){alert(`${v.value}`);return}const r=prompt(g.value);if(r==null||r==null)return;const u={action:"add_players",token:r,player_names:l};console.log("AddNewPlayers: ",u);const{data:n,onFetchResponse:$,onFetchError:E}=S(I).post(u).json();$(t=>{console.log("Success: ",n.value,t),alert(`请求成功: ${A(n.value)}`)}),E(t=>{console.log("Error: ",n.value,t),alert(`无法添加玩家: ${JSON.stringify(n.value)}`)})}return(e,a)=>{const c=V,l=T,r=F,u=B;return m(),p(N,null,[o(r,{model:s,"label-width":"auto"},{default:_(()=>[o(l,{label:i.value},{default:_(()=>[o(c,{modelValue:s.player_names,"onUpdate:modelValue":a[0]||(a[0]=n=>s.player_names=n),type:"textarea",rows:10,placeholder:y.value},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"]),o(l,null,{default:_(()=>[o(u,{type:"primary",onClick:x},{default:_(()=>[b(k(h.value),1)]),_:1})]),_:1})],64)}}},R={};function H(f,s){const i=D;return m(),p("main",null,[o(i)])}const G=C(R,[["render",H]]);export{G as default};
