import{r as T,a as d,o as m,c as p,b as o,w as u,F as w,E as F,d as N,e as b,t as k,u as S,A as V,f as B,g as I,_ as C}from"./index-FvlOoWa5.js";const D={__name:"AddPlayers",setup(f){const r=T({player_names:""}),_=d("新玩家"),y=d("每行一个玩家昵称，不含空格"),h=d("添加"),g=d("输入管理员口令"),v=d("至少输入一个新玩家名");function x(e){let a="";return e.added.length>0&&(a+=`
${e.added.length}名玩家已添加: ${e.added}`),e.duplicated.length>0&&(a+=`
${e.duplicated.length}名玩家昵称已存在: ${e.duplicated}`),e.invalid.length>0&&(a+=`
${e.invalid.length}名玩家昵称格式错误: ${e.invalid}`),a}function A(){P(r.player_names)}function P(e){const a=e.split(`
`).map(t=>t.trim());let c=new Set,n=[];for(let t of a)t!=""&&!c.has(t)&&(n.push(t),c.add(t));if(n.length==0){alert(`${v.value}`);return}const s=prompt(g.value);if(s==null||s==null)return;const i={action:"add_players",token:s,player_names:n},{data:l,onFetchResponse:$,onFetchError:E}=S(V).post(i).json();$(t=>{console.log("Success: ",l.value,t),alert(`请求成功: ${x(l.value)}`)}),E(t=>{console.error("Error: ",l.value,t),alert(`无法添加玩家: ${JSON.stringify(l.value)}`)})}return(e,a)=>{const c=B,n=F,s=N,i=I;return m(),p(w,null,[o(s,{model:r,"label-width":"auto"},{default:u(()=>[o(n,{label:_.value},{default:u(()=>[o(c,{modelValue:r.player_names,"onUpdate:modelValue":a[0]||(a[0]=l=>r.player_names=l),type:"textarea",rows:10,placeholder:y.value},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"]),o(n,null,{default:u(()=>[o(i,{type:"primary",onClick:A},{default:u(()=>[b(k(h.value),1)]),_:1})]),_:1})],64)}}},R={};function H(f,r){const _=D;return m(),p("main",null,[o(_)])}const G=C(R,[["render",H]]);export{G as default};
